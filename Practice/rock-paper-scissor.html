<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rock-Paper-Scisor</title>
  </head>
  <body>
    <button onclick="play('rock')">rock</button>
    <button onclick="play('paper')">paper</button>
    <button onclick="play('scissor')">scissor</button>
    <button onclick="reset()">Reset</button>
    <script>
      let score = JSON.parse(localStorage.getItem("val")) || {
        win: 0,
        lose: 0,
        tie: 0,
      };
      function reset() {
        score.win = 0;
        score.lose = 0;
        score.tie = 0;
        localStorage.removeItem("val");
        alert("score reset");
      }
      function play(user) {
        const computer = getMoveComputer();
        calcluate(computer, user);
      }
      function calcluate(computer, user) {
        let result = "";
        if (user === computer) {
          result = "Tie";
          score.tie++;
        } else if (
          (user === "rock" && computer === "scissor") ||
          (user === "paper" && computer === "rock") ||
          (user === "scissor" && computer === "paper")
        ) {
          result = "You Win";
          score.win++;
        } else {
          result = "You Lose";
          score.lose++;
        }
        let v = JSON.stringify(score);
        localStorage.setItem("val", v);
        
        alert(
          `${result}  because of ${computer} and Win ${score.win} - Lose ${score.lose} - Tie ${score.tie}`,
        );
      }
      function getMoveComputer() {
        let computer = "";
        const random = Math.random();
        if (random < 1 / 3) computer = "rock";
        else if (random < 2 / 3) computer = "paper";
        else computer = "scissor";
        return computer;
      }
    </script>
  </body>
</html>
